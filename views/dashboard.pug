extends layout
block content
  include navbar
  .title
    .container.p-sm-0
      h1.h4.text-white.mb-4.text-center(style={'font-weight': '400'}) #{title}
      div.row
        div.d-flex.justify-content-center.box-search
          div.form-search
            input.textbox.search-input(type='text' placeholder='Search' onkeypress='handleKeyPress(event)')
            button.button.btn-primary(title='Search' onclick='handleSearch()')
              i.fas.fa-search
  .container.p-sm-0
    .block-title
      .block1
        .row1
          //- img(src="/images/icons/block.png", style={'width': '25px', 'height': '25px'})
          h5 LATEST BLOCK
          a.nav-link.p-0.number 1,272,845
            
        .row2
          h5 LATEST CHECKPOINT
          a.nav-link.p-0.number 1,272,845
        .row3
          h5 TOKENS
          a.nav-link.p-0.number 16
      .block2
        .row1
          h5 TRANSACTIONS
          a.nav-link.p-0.number 1,272,845
        .row2
          h5 ACCOUNTS
          a.nav-link.p-0.number 16,002
        .row3
          h5 STORES
          a.nav-link.p-0.number 165
      .block3
        .row1
          h5 TOKENS
          a.nav-link.p-0.number 16
        .row2
          h5 STORES
          a.nav-link.p-0.number 165
  .container.p-sm-0
    div.row.dashboard 
      div.col-md-6.col-12.table-up
        div.border-table.table-transactions
          h5(style={"font-weight": "bold", "margin-bottom": "35px", }) Transactions
          div.row 
            div.col-lg-6.col-12
              div
                label(for="custom-select").status Show: #{transactions.length}/#{totalTransactions} entries
          include tables/table-transactions
          -if(totalTransactions > 10){
            .box-show-more
              a(href='/transactions') Show more ...
          -}

      div.col-md-6.col-12
        div.border-table.table-blocks
          h5(style={"font-weight": "bold", "margin-bottom": "35px"}) Blocks
          div.row 
            div.col-auto
              div
                label(for="custom-select").status Show: #{blocks.length}/#{totalBlocks} entries
          include tables/table-blocks
          -if(totalBlocks > 10){
            .box-show-more
              a(href='/blocks') Show more ...
          -}

  include footer
  script.
    function handleSearch(){
      const text = $('.search-input').val();
      const originUrl = window.location.origin;
      let url = ''
      if (/^[+,-]?\d+$/.test(`${text}`)) {
        url = `${originUrl}/blocks/${text}` 
      } else if (/^0x[a-fA-F0-9]+$/.test(`${text}`)) {
        url = `${originUrl}/transactions/${text}` 
      } else {
        url = `${originUrl}/dashboard` 
      }

      window.location.assign(new URL(url).toString());
    }

    function handleKeyPress(e){
      if (e.keyCode == 13) {
        this.handleSearch();
      }
    }
