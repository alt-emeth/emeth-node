html
  head
    meta(charset="utf-8")
    meta(name="viewport" content="width=device-width, initial-scale=1")
    link(rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons")
    link(rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css")
    //- link(type="text/css" rel='stylesheet' href="/css/bootstrap.min.css")
    link(rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css' integrity='sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm' crossorigin='anonymous')
    link(type="text/css" rel='stylesheet' href="/css/mdb.min.css")
    //- link(type="text/css" rel='stylesheet' href="/css/datatables.min.css")
    link(type="text/css" rel="stylesheet" href="/css/style.css")

    script(type="text/javascript" src="/js/jquery.min.js")
    //- script(type="text/javascript" src="/js/bootstrap.min.js")
    script(src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js' integrity='sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q' crossorigin='anonymous')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js' integrity='sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl' crossorigin='anonymous')
    script(type="text/javascript" src="/js/datatables.min.js")

    title Igniscan
  body
    block content
    script.
      $(document).ready(function() {
        document.cookie = `timezoneOffset=${new Date().getTimezoneOffset()}`;
        
        $('#tbCustom').DataTable({
          scrollX: true,
          searching: false,
          paging: false,
          bFilter: false,
          bInfo: false,
          sort: false
        });

        const url = window.location.href;
        if(url.indexOf('limit=30') > -1){
          $('#select-limit').val('1');
        }
        else if(url.indexOf('limit=50') > -1){
          $('#select-limit').val('2');
        }
      })

      function handleChangeLimit(){
        const key = $('#select-limit').val();
        switch(Number(key)){
          case 0:
            const url0 = new URL(window.location.href);
            url0.searchParams.set('limit', 15);
            url0.searchParams.delete('page');
            window.location.assign(url0.toString());
            break;
          case 1:
            const url1 = new URL(window.location.href);
            url1.searchParams.set('limit', 30);
            url1.searchParams.delete('page');
            window.location.assign(url1.toString());
            break;
          case 2:
            const url2 = new URL(window.location.href);
            url2.searchParams.set('limit', 50);
            url2.searchParams.delete('page');
            window.location.assign(url2.toString());
            break;
          default:
            break;
        }
      }